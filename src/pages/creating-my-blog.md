---
title: 'Gatsbyë¡œ ë¸”ë¡œê·¸ ìƒì„±'
date: '2019-11-10'
tags: ['React', 'Gatsby']
---

ê°œë°œìžì˜ ê¸¸ì„ ê±·ê¸°ë¡œ í•˜ë©´ì„œ ê°œë°œë§Œì„ ìœ„í•œ ë¸”ë¡œê·¸ì˜ í•„ìš”ì„±ì€ ê³„ì† ëŠë¼ê³  ìžˆì—ˆì–´ìš”. íŠ¹ížˆ êµìœ¡ì› ìˆ˜ë£Œë¥¼ ì½”ì•žì— ë‘” í˜„ìž¬, í”„ëŸ°íŠ¸ì—”ë“œ ê°œë°œìžë¡œì„œ ì»¤ë¦¬ì–´ë¥¼ ìŒ“ì•„ê°€ê¸°ë¡œ ê²°ì‹¬í–ˆê¸°ì— í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ê²¸í•œ ë¸”ë¡œê·¸ê°€ ë”ìš± ì ˆì‹¤í•´ì§€ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ê°œë°œìž ê¿ˆë‚˜ë¬´ì´ë‹ˆë§Œí¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ë‚˜ë§Œì˜ ìŠ¤íƒ€ì¼ì„ ë°˜ì˜í•œ ë¸”ë¡œê·¸ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì—ˆê¸°ì— GitHub Pagesì™€ Gatsbyë¥¼ í™œìš©í•˜ì—¬ ë‚˜ë§Œì˜ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ì–´ë³´ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. ðŸ‘

## Gatsbyë¥¼ ì„ íƒí•œ ì´ìœ 

GatsbyëŠ” ë¦¬ì•¡íŠ¸ ê¸°ë°˜ì˜ ì •ì  íŽ˜ì´ì§€ ìƒì„±ê¸°ë¼ê³  í•©ë‹ˆë‹¤. í”ížˆ GitHub Pagesë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” Jekyllê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤. ë‹¤ë§Œ Jekyllì€ Rubyë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œë‹¤ëŠ” í° ì°¨ì´ì ì´ ìžˆìŠµë‹ˆë‹¤. í˜„ìž¬ ë¦¬ì•¡íŠ¸ë¥¼ ê³µë¶€ ì¤‘ì´ë‹ˆ ë§Œí¼, Gatsbyë¡œ ë¸”ë¡œê·¸ë¥¼ ì°¨ê·¼ì°¨ê·¼ ë§Œë“¤ì–´ê°€ë©´ì„œ ë¦¬ì•¡íŠ¸ ì‹¤ë ¥ë„ í•¨ê»˜ ìŒ“ê¸° ìœ„í•´ Gatsbyë¥¼ ë¸”ë¡œê·¸ ìƒì„±ê¸°ë¡œ ì„ íƒí•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ ì‹œìž‘

[Gatsby Tutorial](https://www.gatsbyjs.org/tutorial/part-zero/)ë¥¼ ì°¸ê³ í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì‹œìž‘í•˜ì˜€ìŠµë‹ˆë‹¤.

### Gatsby site ìƒì„±í•˜ê¸°

```bash
$ npm i -g gatsby-cli # gatsby-cliì„ ì„¤ì¹˜í•©ë‹ˆë‹¤.
$ gatsby new [title] # Gatsby siteë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
$ cd [title]
$ gatsby develop # ê°œë°œ ì„œë²„ë¥¼ êµ¬ë™í•©ë‹ˆë‹¤.
```

ê°œë°œ ì„œë²„ë¥¼ êµ¬ë™í•˜ê²Œ ë˜ë©´ **http://localhost:8000/**ì—ì„œ ìƒì„±ëœ ì‚¬ì´íŠ¸ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ðŸ‘€ ê°œë°œ ì„œë²„ì—ì„  **watched** ìƒíƒœì´ë¯€ë¡œ íŒŒì¼ ìˆ˜ì • ë’¤ ì €ìž¥í•˜ê¸°ë§Œ í•˜ë©´ ì¦‰ì‹œ ë¸Œë¼ìš°ì €ì— ë°˜ì˜ë©ë‹ˆë‹¤! ðŸ˜Š

### Gatsbyì—ì„œ Styled Components ì‚¬ìš©í•˜ê¸°

Styled Componentsë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
$ npm i gatsby-plugin-styled-components styled-components babel-plugin-styled-components
```

plugins ë°°ì—´ì— Styled Componentsë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

```json
// gatsby-config.js
plugins: [
  `gatsby-plugin-styled-components`,
]
```

## ë¸”ë¡œê·¸ì— í…Œë§ˆ ìŠ¤ìœ„ì¹˜ ê¸°ëŠ¥ ì¶”ê°€

[A Dark Mode Toggle with React and ThemeProvider](https://css-tricks.com/a-dark-mode-toggle-with-react-and-themeprovider/)ì„ ì°¸ê³ í•˜ì—¬ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

### í…Œë§ˆ ê°ì²´ ìƒì„±í•˜ê¸°

ìš°ì„  ì í•©í•œ js íŒŒì¼ ë‚´ì— í…Œë§ˆ ê°ì²´ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ì´ë²ˆ ê²½ìš° ì œ ë¸”ë¡œê·¸ëŠ” ê·¸ë¦¬ ë³µìž¡í•œ êµ¬ì¡°ê°€ ì•„ë‹ˆë¯€ë¡œ `Layout.js` ë¬¸ì„œ ë‚´ì— ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤.

ì´í›„ `createGlobalStyle` ì»´í¬ë„ŒíŠ¸ë¥¼ ì´ìš©í•˜ì—¬ `props`ë¡œ ì„¤ì •ëœ í…Œë§ˆì˜ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤.

```javascript
import { createGlobalStyle } from 'styled-components'

// í…Œë§ˆ ê°ì²´ ìƒì„±
export const darkTheme = {
  body: '#292d3e',
  text: '#b2ccd6',
  primary: '#c792ea',
  second: '#f9c76a',
  third: '#c3e88d',
}

export const lightTheme = {
  body: '#f3f2e9',
  text: '#775f59',
  primary: '#ff6969',
  second: '#f7a54a',
  third: '#98c05d',
}

(...)

// ê¸€ë¡œë²Œ ìŠ¤íƒ€ì¼ ì„¤ì •
const GlobalStyle = createGlobalStyle`
 body {
  background: ${({ theme }) => theme.body};
  color: ${({ theme }) => theme.text};
  font-size: 1rem;
  (...)
 }
`
```

ì´í›„ ì»´í¬ë„ŒíŠ¸ ë‚´ì— `useState`ë¥¼ ì´ìš©í•˜ì—¬ í…Œë§ˆë¥¼ ìœ„í•œ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

ë§Œì•½ ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ê»ë‹¤ ì¼œë„ ìŠ¤ìœ„ì¹˜í•œ í…Œë§ˆë¥¼ ë‚¨ê¸°ê³  ì‹¶ì„ ê²½ìš° ì›¹ ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•´ ì €ìž¥í•œ ë’¤ `useEffect`ë¥¼ ì´ìš©í•˜ì—¬ ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë  ë•Œ í…Œë§ˆì— ì ìš©ë˜ë„ë¡ í•©ë‹ˆë‹¤.

ì´ì œ ê°„ë‹¨í•˜ê²Œ í…Œë§ˆë¥¼ ìŠ¤ìœ„ì¹­í•  ìˆ˜ ìžˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤! ðŸ˜

```javascript
const [theme, setTheme] = useState(darkTheme)

const Layout = ({ children }) => {
  const [theme, setTheme] = useState(darkTheme)

  const onToggle = () => {
    if (theme === lightTheme) {
      localStorage.setItem('theme', 'dark')
      return setTheme(darkTheme)
    } else {
      localStorage.setItem('theme', 'light')
      return setTheme(lightTheme)
    }
  }

  useEffect(() => {
    const theme = localStorage.getItem('theme')
    if (theme == 'light') setTheme(lightTheme)
    else setTheme(darkTheme)
  }, [])

  return (
    <>
      <GlobalStyle theme={theme} />
      <Header theme={theme} onToggle={onToggle} />
      {children}
    </>
  )
}
```
