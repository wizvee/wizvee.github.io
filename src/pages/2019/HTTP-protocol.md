---
# type: 'post'
title: 'HTTP 개요'
date: '2019-12-02'
tags: ['HTTP']
---

[HTTP 개요](https://developer.mozilla.org/ko/docs/Web/HTTP/Overview)와 [HTTP 메시지](https://developer.mozilla.org/ko/docs/Web/HTTP/Messages)를 참고하여 개인적으로 공부한 내용입니다. 👩‍💻

## HTTP

**HTTP는 HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 프로토콜**입니다. HTTP는 웹에서 이루어지는 모든 데이터 교환의 기초이며, 클라이언트-서버 프로토콜이기도 합니다. 즉 보통 웹 브라우저인 수신자 측에 의해 요청이 초기화되는 프로토콜을 의미합니다.

클라이언트와 서버들은 개별적인 메시지 교환에 의해 통신합니다. 보통 브라우저인 클라이언트에 의해 전송되는 메시지를 **요청(requests)**이라고 부르며, 그에 대해 서버에서 응답으로 전송되는 매시지를 **응답(responses)**이라고 부릅니다.

### HTTP의 기초적인 측면

**HTTP는 간단합니다.**

HTTP는 사람이 읽을 수 있으며 간단하게 고안되었습니다. HTTP 메시지들은 사람이 읽고 이해할 수 있어, 테스트하기 쉽고 초심자의 진입장벽을 낮췄습니다.

**HTTP는 확장 가능합니다.**

HTTP/1.0에서 소개된, HTTP 헤더는 HTTP를 확장하고 실험하기 쉽게 만들어 주었습니다. 클라이언트와 서버가 새로운 헤더의 시멘틱에 대해 간단한 합의만 한다면, 언제든지 새로운 기능을 추가할 수 있습니다.

**HTTP는 상태가 없지만, 세션은 있습니다.**

HTTP는 **Stateless**입니다. 즉 연속하여 전달된 두 개의 요청 사이에는 연결고리가 없습니다. 하지만 HTTP 쿠키는 상태가 있는 세션을 만들도록 해줍니다.

## HTTP 메시지

**HTTP 메시지**는 ASCII로 인코딩된 텍스트 정보이며 여러 줄로 되어 있습니다. HTTP 요청과 응답의 구조는 서로 닮았으며, 그 구조는 다음과 같습니다.

1. 시작 줄(start-line)에는 실행되어야 할 요청, 또는 요청 수행에 대한 성공 또는 실패가 기록되어 있습니다. 이 줄은 항상 한 줄로 끝납니다.
2. 옵션으로 HTTP 헤더 세트가 들어갑니다. 여기에는 요청에 대한 설명 혹은 메시지 본문에 대한 설명이 들어갑니다.
3. 요청에 대한 모든 메타 정보가 전송되었음을 알리는 빈 줄(blank line)이 삽입됩니다.
4. 요청과 관련된 내용(HTTP 폼 콘텐츠 등)이 옵션으로 들어가거나, 응답과 관련된 문서가 들어갑니다. 본문의 존재 유무 및 크기는 첫 줄과 HTTP 헤더에 명시됩니다.

HTTP 메시지의 시작 줄과 HTTP 헤더를 묶어서 **요청 헤드**라고 부르며, 이와 반대로 메시지의 페이로드는 **본문**이라고 합니다.

### HTTP 요청

**시작 줄(start-line)**

HTTP 요청은 서버가 특정 동작을 취하게끔 만들기 위해 클라이언트에서 전송하는 메시지입니다. 시작 줄은 다음과 같이 세 가지 요소로 이루어져 있습니다.

1. 첫 번째는 HTTP 메서드로 영어 동사(`GET`, `PUT`, `POST`) 혹은 명사(`HEAD`, `OPTIONS`)를 사용해 서버가 수행해야 할 동작들을 나타냅니다.

2. 두 번째로 오는 요청은 주로 URL, 또는 프로토콜, 포트, 도메인의 절대 경로로 나타낼 수 있으며 이들은 요청 컨텍스트에 의해 특정 지어 집니다. 요청 타깃 포맷은 HTTP 메서드에 따라 달라집니다.

   - **origin 형식:** 끝에 `?`와 query string이 붙는 절대 경로입니다. 이는 가장 일반적인 형식이며, `GET`, `POST`, `HEAD`, `OPTIONS` 메서드와 함께 사용합니다.

     `GET /background.png HTTP/1.0`, `HEAD /test.html?query=alibaba HTTP/1.1`

   - **absolute 형식:** 완전한 URL 형식입니다. 프록시에 연결하는 경우 대부분 `GET`과 함께 사용됩니다.

   `GET http://developer.mozilla.org/en-US/docs/Web/HTTP/Messages HTTP/1.1`

   - **authority 형식:** 도메인 이름 및 옵션 포트(`:`가 앞에 붙습니다)로 이루어진 URL의 authority component입니다. HTTP 터널을 구축하는 경우에만 `CONNECT`와 함께 사용할 수 있습니다.

   `CONNECT developer.mozilla.org:80 HTTP/1.1`

   - **asterisk 형식:** `OPTIONS`와 함께 `*` 하나로 간단하게 서버 전체를 나타냅니다.

   `OPTIONS * HTTP/1.1`

3. 마지막으로 HTTP 버전이 들어갑니다. 메시지의 남은 구조를 결정하기 때문에, 응답 메시지에 써야 할 HTTP 버전을 알려주는 역할을 합니다.

**헤더**

요청에 들어가는 **HTTP 헤더**는 HTTP 헤더의 기본 구조를 따릅니다. 대소문자 구분 없는 문자열 다음에 콜론(`:`)이 붙으며, 그 뒤에 오는 값은 헤더에 따라 달라집니다. 헤더는 값까지 포함해 한 줄로 구성되지만 꽤 길어질 수 있습니다.

**본문**

본문은 요청의 마지막 부분에 들어갑니다. 모든 요청에 본문이 들어가지는 않습니다. `GET`, `HEAD`, `DELETE`, `OPTIONS`처럼 리소스를 가져오는 요청은 보통 본문이 필요가 없습니다. 일부 요청은 업데이트를 하기 위해 서버에 데이터를 전송합니다. 보통 (HTML 폼 데이터를 포함하는) `POST` 요청일 경우에 그렇습니다.

넓게 보면 본문은 두 가지 종류로 나뉩니다.

- **단일-리소스 본문(single-resource bodies):** 헤더 두 개(`Content-Type`과 `Content-Length`)로 정의된 단일 파일로 구성됩니다.

- **다중-리소스 본문(multiple-resource bodies):** 멀티파트 본문으로 구성되는 다중 리소스 본문에서는 파트마다 다른 정보를 지니게 됩니다. 보통 HTML 폼과 관련이 있습니다.

### HTTP 응답

**상태 줄**

HTTP 응답의 시작 줄은 상태 줄(status line)이라고 불리며, 다음과 같은 정보를 가지고 있습니다.

1. **프로토콜 버전:** 보통 `HTTP/1.1`입니다.
2. **상태 코드:** 요청의 성공 여부를 나타냅니다.
3. **상태 텍스트:** 짧고 간결하게 상태 코드에 대한 설명을 글로 나타내어 사람들이 HTTP 메시지를 이해할 때 도움이 됩니다.

상태 줄은 일반적으로 `HTTP/1.1 404 Not Found.`같이 생겼습니다.

**헤더**

응답에 들어가는 HTTP 헤더는 다른 헤더와 동일한 구조를 따릅니다.

**본문**

본문은 응답의 마지막 부분에 들어갑니다. 모든 응답에 본문이 들어가지는 않습니다. `201`, `204`와 같은 상태 코드를 가진 응답에는 보통 본문이 없습니다.

넓게 보면 본문은 세 가지 종류로 나뉩니다.

- 이미 **길이가 알려진 단일 파일**로 구성된 단일-리소스 본문: 헤더 두 개(`Content-Type`과 `Content-Length`)로 정의합니다.

- **길이를 모르는 단일 파일**로 구성된 단일-리소스 본문: `Transfer-Encoding`가 `chunked`로 설정되어 있으며, 파일은 청크로 나뉘어 인코딩 되어 있습니다.

- 서로 다른 정보를 담고 있는 멀티 파트로 이루어진 **다중 리소스 본문:** 이 경우는 상대적으로 위의 두 경우에 비해 보기 힘듭니다.
